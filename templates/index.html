{% extends 'base.html' %}
{% load static %}

{% block content %}
<!-- Hero Section with Dynamic Banners -->
<section class="hero-section">
    <div class="container">
        {% if homepage_banners %}
            {% for banner in homepage_banners %}
            <div class="banner-content {% if not forloop.first %}d-none{% endif %}" id="banner-{{ forloop.counter0 }}">
                <h1 class="display-4 fw-bold mb-4">{{ banner.title }}</h1>
                {% if banner.subtitle %}
                <p class="lead mb-4 fs-5">{{ banner.subtitle }}</p>
                {% endif %}
                <div class="d-flex gap-3 justify-content-center flex-wrap">
                    <a href="{{ banner.button_link }}" class="btn btn-primary btn-lg px-4 py-3 fw-bold">
                        <i class="fas fa-shopping-bag me-2"></i>
                        {{ banner.button_text }}
                    </a>
                    <a href="https://wa.me/971561498516" class="btn btn-success btn-lg px-4 py-3 fw-bold" target="_blank">
                        <i class="fab fa-whatsapp me-2"></i>
                        {% if current_language == 'sw' %}Oda kupitia WhatsApp{% else %}Order via WhatsApp{% endif %}
                    </a>
                </div>
            </div>
            {% endfor %}
            
            <!-- Banner Navigation -->
            {% if homepage_banners|length > 1 %}
            <div class="banner-navigation mt-4">
                {% for banner in homepage_banners %}
                <button class="btn btn-sm btn-outline-light mx-1 banner-dot" data-banner="banner-{{ forloop.counter0 }}">
                    {{ forloop.counter }}
                </button>
                {% endfor %}
            </div>
            {% endif %}
        {% else %}
            <!-- Default banner if no banners are configured -->
            <h1 class="display-4 fw-bold mb-4">
                {% if current_language == 'sw' %}
                    Bidhaa Bora Kutoka Dubai Had Tanzania
                {% else %}
                    Quality Products from Dubai to Tanzania
                {% endif %}
            </h1>
            <p class="lead mb-4 fs-5">
                {% if current_language == 'sw' %}
                    "Ukiwa Unahitaji bidhaa kutoka Dubai iwe kwa biashara au matumizi binafsi basi wasiliana nasi"
                {% else %}
                    "When you need products from Dubai whether for business or personal use, contact us"
                {% endif %}
            </p>
            <div class="d-flex gap-3 justify-content-center flex-wrap">
                <a href="#" class="btn btn-primary btn-lg px-4 py-3 fw-bold">
                    <i class="fas fa-shopping-bag me-2"></i>
                    {% if current_language == 'sw' %}Nunua Sasa{% else %}Shop Now{% endif %}
                </a>
                <a href="https://wa.me/971561498516" class="btn btn-success btn-lg px-4 py-3 fw-bold" target="_blank">
                    <i class="fab fa-whatsapp me-2"></i>
                    {% if current_language == 'sw' %}Oda kupitia WhatsApp{% else %}Order via WhatsApp{% endif %}
                </a>
            </div>
        {% endif %}
    </div>
    
    <!-- Dynamic Background Images -->
    <div class="banner-backgrounds">
        {% if homepage_banners %}
            {% for banner in homepage_banners %}
            <div class="banner-bg {% if forloop.first %}active{% endif %}" 
                 style="background-image: url('{{ banner.image.url }}');"
                 data-banner="banner-{{ forloop.counter0 }}"></div>
            {% endfor %}
        {% else %}
            <!-- Default background -->
            <div class="banner-bg active" 
                 style="background-image: url('https://images.unsplash.com/photo-1512453979798-5ea266f8880c');"></div>
        {% endif %}
    </div>
</section>

<!-- Categories Section with Dynamic Images -->
<section class="py-5">
    <div class="container">
        <h2 class="text-center mb-5 display-5 fw-bold">
            {% if current_language == 'sw' %}Aina za Bidhaa Zetu{% else %}Our Product Categories{% endif %}
        </h2>
        <div class="row g-4">
            {% if category_banners %}
                {% for category in category_banners %}
                <div class="col-md-4">
                    <div class="card category-card h-100 border-0">
                        <img src="{{ category.image.url }}" 
                             class="card-img-top" 
                             alt="{{ category.category_name }}" 
                             style="height: 250px; object-fit: cover;">
                        <div class="card-body text-center p-4">
                            <h4 class="card-title text-primary">{{ category.category_name }}</h4>
                            <p class="card-text">{{ category.description }}</p>
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <!-- Default categories if none configured -->
                <div class="col-md-4">
                    <div class="card category-card h-100 border-0">
                        <img src="https://images.unsplash.com/photo-1496181133206-80ce9b88a853" 
                             class="card-img-top" 
                             alt="Electronics" 
                             style="height: 250px; object-fit: cover;">
                        <div class="card-body text-center p-4">
                            <h4 class="card-title text-primary">
                                {% if current_language == 'sw' %}Vyeo vya Umeme{% else %}Electronics & Gadgets{% endif %}
                            </h4>
                            <p class="card-text">
                                {% if current_language == 'sw' %}
                                    Laptops, simu janja, vipasuasikio, tablet
                                {% else %}
                                    Laptops, smartphones, earbuds, tablets
                                {% endif %}
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card category-card h-100 border-0">
                        <img src="https://images.unsplash.com/photo-1555529669-e69e7aa0ba9a" 
                             class="card-img-top" 
                             alt="Fashion" 
                             style="height: 250px; object-fit: cover;">
                        <div class="card-body text-center p-4">
                            <h4 class="card-title text-primary">
                                {% if current_language == 'sw' %}Mavazi na Virembesho{% else %}Fashion & Accessories{% endif %}
                            </h4>
                            <p class="card-text">
                                {% if current_language == 'sw' %}
                                    Viatu, mikoba, saa, marashi, mavazi
                                {% else %}
                                    Shoes, bags, watches, perfumes, clothing
                                {% endif %}
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card category-card h-100 border-0">
                        <img src="https://images.unsplash.com/photo-1558618666-fcd25c85cd64" 
                             class="card-img-top" 
                             alt="Home & Auto" 
                             style="height: 250px; object-fit: cover;">
                        <div class="card-body text-center p-4">
                            <h4 class="card-title text-primary">
                                {% if current_language == 'sw' %}Vifaa vya Nyumbani na Magari{% else %}Home & Auto Parts{% endif %}
                            </h4>
                            <p class="card-text">
                                {% if current_language == 'sw' %}
                                    Vifaa vya nyumbani, ofisi, salon, magari
                                {% else %}
                                    Home appliances, office equipment, salon, car parts
                                {% endif %}
                            </p>
                        </div>
                    </div>
                </div>
            {% endif %}
        </div>
    </div>
</section>

<!-- Featured Products Section with Dynamic Products -->
<section class="py-5 bg-light">
    <div class="container">
        <h2 class="text-center mb-5 display-5 fw-bold">
            {% if current_language == 'sw' %}Bidhaa Maarufu{% else %}Popular Products{% endif %}
        </h2>
        <div class="row g-4">
            {% if featured_products %}
                {% for product in featured_products %}
                <div class="col-lg-3 col-md-6">
                    <div class="card product-card h-100 border-0">
                        <img src="{{ product.image.url }}" 
                             class="card-img-top" 
                             alt="{{ product.product_name }}" 
                             style="height: 200px; object-fit: cover;">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">{{ product.product_name }}</h5>
                            <p class="card-text text-muted small flex-grow-1">{{ product.description }}</p>
                            <div class="mt-auto">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <span class="h4 price-tzs mb-0">TZS {{ product.price }}</span>
                                    <span class="badge bg-success">
                                        {% if current_language == 'sw' %}Ipo Stock{% else %}In Stock{% endif %}
                                    </span>
                                </div>
                                <div class="d-grid gap-2">
                                    <a href="#" class="btn btn-outline-primary">
                                        {% if current_language == 'sw' %}Angalia Maelezo{% else %}View Details{% endif %}
                                    </a>
                                    <a href="#" class="btn btn-primary">
                                        {% if current_language == 'sw' %}Weka kwenye Carti{% else %}Add to Cart{% endif %}
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <!-- Default featured products if none configured -->
                <div class="col-lg-3 col-md-6">
                    <div class="card product-card h-100 border-0">
                        <img src="https://images.unsplash.com/photo-1511707171634-5f897ff02aa9" 
                             class="card-img-top" 
                             alt="Smartphone" 
                             style="height: 200px; object-fit: cover;">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">iPhone 15 Pro</h5>
                            <p class="card-text text-muted small flex-grow-1">
                                {% if current_language == 'sw' %}
                                    Simu janja ya Apple ya kisasa
                                {% else %}
                                    Latest Apple smartphone
                                {% endif %}
                            </p>
                            <div class="mt-auto">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <span class="h4 price-tzs mb-0">TZS 2,450,000</span>
                                    <span class="badge bg-success">
                                        {% if current_language == 'sw' %}Ipo Stock{% else %}In Stock{% endif %}
                                    </span>
                                </div>
                                <div class="d-grid gap-2">
                                    <a href="#" class="btn btn-outline-primary">
                                        {% if current_language == 'sw' %}Angalia Maelezo{% else %}View Details{% endif %}
                                    </a>
                                    <a href="#" class="btn btn-primary">
                                        {% if current_language == 'sw' %}Weka kwenye Carti{% else %}Add to Cart{% endif %}
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="card product-card h-100 border-0">
                        <img src="https://images.unsplash.com/photo-1542291026-7eec264c27ff" 
                             class="card-img-top" 
                             alt="Sneakers" 
                             style="height: 200px; object-fit: cover;">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">Nike Air Max</h5>
                            <p class="card-text text-muted small flex-grow-1">
                                {% if current_language == 'sw' %}
                                    Viatu vya hali ya juu vya michezo
                                {% else %}
                                    Premium sports shoes
                                {% endif %}
                            </p>
                            <div class="mt-auto">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <span class="h4 price-tzs mb-0">TZS 295,000</span>
                                    <span class="badge bg-success">
                                        {% if current_language == 'sw' %}Ipo Stock{% else %}In Stock{% endif %}
                                    </span>
                                </div>
                                <div class="d-grid gap-2">
                                    <a href="#" class="btn btn-outline-primary">
                                        {% if current_language == 'sw' %}Angalia Maelezo{% else %}View Details{% endif %}
                                    </a>
                                    <a href="#" class="btn btn-primary">
                                        {% if current_language == 'sw' %}Weka kwenye Carti{% else %}Add to Cart{% endif %}
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="card product-card h-100 border-0">
                        <img src="https://images.unsplash.com/photo-1566150905458-1bf1fc113f0d" 
                             class="card-img-top" 
                             alt="Perfume" 
                             style="height: 200px; object-fit: cover;">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">Original Perfumes</h5>
                            <p class="card-text text-muted small flex-grow-1">
                                {% if current_language == 'sw' %}
                                    Marashi asili kutoka Dubai
                                {% else %}
                                    Original perfumes from Dubai
                                {% endif %}
                            </p>
                            <div class="mt-auto">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <span class="h4 price-tzs mb-0">TZS 110,000</span>
                                    <span class="badge bg-success">
                                        {% if current_language == 'sw' %}Ipo Stock{% else %}In Stock{% endif %}
                                    </span>
                                </div>
                                <div class="d-grid gap-2">
                                    <a href="#" class="btn btn-outline-primary">
                                        {% if current_language == 'sw' %}Angalia Maelezo{% else %}View Details{% endif %}
                                    </a>
                                    <a href="#" class="btn btn-primary">
                                        {% if current_language == 'sw' %}Weka kwenye Carti{% else %}Add to Cart{% endif %}
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="card product-card h-100 border-0">
                        <img src="https://images.unsplash.com/photo-1560343090-f0409e92791a" 
                             class="card-img-top" 
                             alt="Laptop" 
                             style="height: 200px; object-fit: cover;">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">MacBook Pro</h5>
                            <p class="card-text text-muted small flex-grow-1">
                                {% if current_language == 'sw' %}
                                    Laptop ya hali ya juu ya Apple
                                {% else %}
                                    High-performance Apple laptop
                                {% endif %}
                            </p>
                            <div class="mt-auto">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <span class="h4 price-tzs mb-0">TZS 3,190,000</span>
                                    <span class="badge bg-success">
                                        {% if current_language == 'sw' %}Ipo Stock{% else %}In Stock{% endif %}
                                    </span>
                                </div>
                                <div class="d-grid gap-2">
                                    <a href="#" class="btn btn-outline-primary">
                                        {% if current_language == 'sw' %}Angalia Maelezo{% else %}View Details{% endif %}
                                    </a>
                                    <a href="#" class="btn btn-primary">
                                        {% if current_language == 'sw' %}Weka kwenye Carti{% else %}Add to Cart{% endif %}
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            {% endif %}
        </div>
    </div>
</section>

<!-- Why Choose Us Section -->
<section class="values-section py-5">
    <div class="container">
        <h2 class="text-center mb-5 display-5 fw-bold text-white">
            {% if current_language == 'sw' %}Kwa Nini Kuchagua Ambertek Export?{% else %}Why Choose Ambertek Export?{% endif %}
        </h2>
        <div class="row text-center">
            <div class="col-md-4 mb-4">
                <div class="feature-icon">
                    <i class="fas fa-shield-alt fa-2x text-primary"></i>
                </div>
                <h4 class="text-white mb-3">
                    {% if current_language == 'sw' %}Uaminifu{% else %}Trustworthiness{% endif %}
                </h4>
                <p class="text-light">
                    {% if current_language == 'sw' %}
                        Huduma ya kuaminika na usafirishaji wa uhakika. Uwiano wa bei ni wa haki kabisa.
                    {% else %}
                        Trustworthy service with reliable delivery and honest pricing. Your satisfaction is our priority.
                    {% endif %}
                </p>
            </div>
            <div class="col-md-4 mb-4">
                <div class="feature-icon">
                    <i class="fas fa-award fa-2x text-primary"></i>
                </div>
                <h4 class="text-white mb-3">
                    {% if current_language == 'sw' %}Ubora{% else %}Quality{% endif %}
                </h4>
                <p class="text-light">
                    {% if current_language == 'sw' %}
                        Bidhaa za hali ya juu moja kwa moja kutoka masoko ya Dubai. Ubora unathibitishwa.
                    {% else %}
                        High quality products directly from Dubai markets and trusted suppliers. Quality guaranteed.
                    {% endif %}
                </p>
            </div>
            <div class="col-md-4 mb-4">
                <div class="feature-icon">
                    <i class="fas fa-shipping-fast fa-2x text-primary"></i>
                </div>
                <h4 class="text-white mb-3">
                    {% if current_language == 'sw' %}Kasi{% else %}Speed{% endif %}
                </h4>
                <p class="text-light">
                    {% if current_language == 'sw' %}
                        Usafirishaji wa haraka hadi maeneo yote Tanzania. Wasafirishaji wenye uzoefu.
                    {% else %}
                        Fast shipping to all regions in Tanzania. Experienced delivery partners.
                    {% endif %}
                </p>
            </div>
        </div>
    </div>
</section>

<!-- Contact CTA Section -->
<section class="py-5 bg-primary text-white">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-8">
                <h3 class="fw-bold">
                    {% if current_language == 'sw' %}Tayari Kufanya Oda?{% else %}Ready to Place an Order?{% endif %}
                </h3>
                <p class="lead mb-0">
                    {% if current_language == 'sw' %}
                        Wasiliana nasi leo kwa bei bora zaidi kutoka Dubai!
                    {% else %}
                        Contact us today for the best prices from Dubai!
                    {% endif %}
                </p>
            </div>
            <div class="col-md-4 text-end">
                <a href="https://wa.me/971561498516" class="btn btn-success btn-lg px-4" target="_blank">
                    <i class="fab fa-whatsapp me-2"></i>
                    {% if current_language == 'sw' %}Wasiliana Sasa{% else %}Contact Now{% endif %}
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Shipping Info Section -->
<section class="py-5">
    <div class="container">
        <h2 class="text-center mb-5 display-5 fw-bold">
            {% if current_language == 'sw' %}Maelezo ya Usafirishaji{% else %}Shipping Information{% endif %}
        </h2>
        <div class="row text-center">
            <div class="col-md-3">
                <i class="fas fa-shipping-fast fa-3x text-primary mb-3"></i>
                <h5>
                    {% if current_language == 'sw' %}Usafirishaji Bure{% else %}Free Shipping{% endif %}
                </h5>
                <p class="text-muted">
                    {% if current_language == 'sw' %}Dar es Salaam{% else %}Dar es Salaam{% endif %}
                </p>
            </div>
            <div class="col-md-3">
                <i class="fas fa-calendar-alt fa-3x text-primary mb-3"></i>
                <h5>
                    {% if current_language == 'sw' %}Siku 7-14{% else %}7-14 Days{% endif %}
                </h5>
                <p class="text-muted">
                    {% if current_language == 'sw' %}Muda wa Kufika{% else %}Delivery Time{% endif %}
                </p>
            </div>
            <div class="col-md-3">
                <i class="fas fa-truck fa-3x text-primary mb-3"></i>
                <h5>
                    {% if current_language == 'sw' %}Kufikia Mlango{% else %}Door Delivery{% endif %}
                </h5>
                <p class="text-muted">
                    {% if current_language == 'sw' %}Wasafirishaji Wetu{% else %}Our Carriers{% endif %}
                </p>
            </div>
            <div class="col-md-3">
                <i class="fas fa-phone-alt fa-3x text-primary mb-3"></i>
                <h5>
                    {% if current_language == 'sw' %}Msaada 24/7{% else %}24/7 Support{% endif %}
                </h5>
                <p class="text-muted">
                    {% if current_language == 'sw' %}Kupitia WhatsApp{% else %}Via WhatsApp{% endif %}
                </p>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
// Banner carousel functionality
document.addEventListener('DOMContentLoaded', function() {
    const bannerDots = document.querySelectorAll('.banner-dot');
    const bannerContents = document.querySelectorAll('.banner-content');
    const bannerBackgrounds = document.querySelectorAll('.banner-bg');
    
    if (bannerDots.length > 0) {
        bannerDots.forEach(dot => {
            dot.addEventListener('click', function() {
                const bannerId = this.getAttribute('data-banner');
                
                // Hide all banners
                bannerContents.forEach(content => content.classList.add('d-none'));
                bannerBackgrounds.forEach(bg => bg.classList.remove('active'));
                
                // Show selected banner
                document.getElementById(bannerId).classList.remove('d-none');
                document.querySelector(`.banner-bg[data-banner="${bannerId}"]`).classList.add('active');
                
                // Update active dot
                bannerDots.forEach(d => d.classList.remove('active'));
                this.classList.add('active');
            });
        });
        
        // Auto-rotate banners every 5 seconds
        let currentBanner = 0;
        setInterval(() => {
            currentBanner = (currentBanner + 1) % bannerDots.length;
            bannerDots[currentBanner].click();
        }, 5000);
    }
});
</script>

<style>
.banner-backgrounds {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
}

.banner-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-size: cover;
    background-position: center;
    opacity: 0;
    transition: opacity 1s ease-in-out;
}

.banner-bg.active {
    opacity: 1;
}

.banner-bg::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7));
}

.banner-dot.active {
    background-color: white;
    color: #2c5aa0;
}
</style>
{% endblock %}